var Breakdown,breakdown;(function(n){var t=function(){function n(n,t){this.name=t;this.audio=document.createElement("audio");var i=document.createElement("source");i.src="audio/"+t+".mp3";i.type="audio/mp3";this.audio.id="#"+t;this.audio.preload="auto";this.audio.appendChild(i);document.body.appendChild(this.audio);this.source=n.createMediaElementSource(this.audio);this.gain=n.createGain();this.gain.gain.value=this.volume=1;this.source.connect(this.gain)}return Object.defineProperty(n.prototype,"volume",{get:function(){return this.gain.gain.value},set:function(n){this._previousVolume=this.gain.gain.value;this.gain.gain.value=n},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"muted",{get:function(){return this.volume===0},enumerable:!0,configurable:!0}),n.prototype.mute=function(){this.volume=this.muted?this._previousVolume||1:0},n}(),i;n.Instrument=t;i=function(){function n(n){this.$scope=n;this.instruments=[];this._playing=!1;this.context=new AudioContext;this.gain=this.context.createGain();this.gain.connect(this.context.destination);this._addInstrument("bongo");this._addInstrument("guira");this._addInstrument("bass");var t=this.instruments[0];t.audio.ontimeupdate=this.$scope.$apply}return Object.defineProperty(n.prototype,"elapsed",{get:function(){var n=this.instruments[0];return n.audio.currentTime},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"percentage",{get:function(){var n=this.instruments[0];return n.audio.currentTime/n.audio.duration},enumerable:!0,configurable:!0}),n.prototype._addInstrument=function(n){var i=new t(this.context,n);i.gain.connect(this.gain);this.instruments.push(i)},Object.defineProperty(n.prototype,"playing",{get:function(){return this._playing},enumerable:!0,configurable:!0}),n.prototype.play=function(){this.context.state==="suspended"&&this.context.resume();this.playing?(this.instruments.forEach(function(n){n.audio.pause()}),this._playing=!1):(this.instruments.forEach(function(n){n.audio.play()}),this._playing=!0)},Object.defineProperty(n.prototype,"volume",{get:function(){return this.gain.gain.value},set:function(n){this._previousVolume=this.gain.gain.value;this.gain.gain.value=n},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"muted",{get:function(){return this.volume===0},enumerable:!0,configurable:!0}),n.prototype.mute=function(){this.volume=this.muted?this._previousVolume||1:0},n.prototype.$postLink=function(){},n.$inject=["$scope"],n}();n.MainCtrl=i})(Breakdown||(Breakdown={}));breakdown=angular.module("breakdown",[]);breakdown.controller("mainCtrl",Breakdown.MainCtrl);